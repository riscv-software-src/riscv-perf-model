:doctitle: Olympia Vector Permutation Design Document

:toc:

[[Document_Information]]
== Document Information

TODO

[[Revision_History]]
=== Revision History

[width="100%",cols="11%,11%,16%,62%",options="header",]
|===
|*Revision* |*Date*      |*Author*  |*Summary of Changes*
|0.1        | 2025.04.TODO | Sai Govardhan | Initial Vector Permutations Design Document
|===

[[Conventions_and_Terminology]]
=== Conventions and Terminology


[width="100%",cols="17%,83%",options="header",]
|===
|Label |Description
| VLSU | Vector Load Store Unit
| VLEN | 
|===

[[Related_Documents]]
=== Related Documents

// <external documents relevant to the unit>

[width="100%",cols="25%,75%",options="header",]
|===
|*Title* |*Description*
| The RISC-V Vector ISA (v1.0) | TODO 
| Saturn Vectors | TODO
| The vector thesis | TODO
|===


[[Notes_Open_Issues]]
=== Notes/Open Issues

// <advisories, limitations, unsolved problems>

* Note1
* Note 2

[[OVERVIEW]]
== OVERVIEW
The following is the directory structure of olympia, for reference:

```bash
.
├── arches              
├── CMakeLists.txt
├── CodingStyle.md
├── conda
├── CONTRIBUTING.md
├── CONTRIBUTORS.md
├── core                ## Consists of the vector/ directory
├── docs
├── fsl
├── layouts
├── LICENSE
├── mavis
├── mss
├── README.md
├── release
├── reports
├── sim
├── stf_lib
├── test
├── test.json
└── traces
```

=== Configuring the Vector Unit 

Olympia implements the Vector Unit in the `core/vector/` directory where:

 - `VLEN` is the width of the vector register statically set to 1024

 - `ELEN`, the Maximum Vector Element Width is specified based on `sew_` (Set Element Width)

Within the `core/vector/VectorConfig.hpp` file, the `VectorConfig` class is defined to configure the Vector Unit.

```
VectorConfig(uint32_t vl, uint32_t sew, uint32_t lmul, uint32_t vta)
```

A sample assembly instruction is:

```
vsetvli t0, a0, e32, m1   # Configure vector unit where a0 specifies the vector length (vl_), sew_=32, lmul_=1

```
Note that the Vector register group multiplier setting is specified by `lmul_` and is set to 1 by default. 

The `vlmax_`, the maximum vector length is set to `((VLEN / sew_) * lmul_)`.

We would be using a subset of `vlmax_` by specifying the `vl_` in the vector configuration.

Take an example where VLEN is set to 1024, `sew_` is 32 bits and `lmul_` is 1. Then `vlmax_` is ((1024/32)*1) = 32. Which means that there is one logical Vector register is divided into 32 elements of 32 bits each.

If we set Vector Length (that we would use) `vl_` to 16, then we are using 16 elements of 32 `vlmax_` elements we could use in the logical vector register file instance.

Note that the `vta_` (Vector Tail Agnostic) parameter is set to false by default, which indicates that it is undisturbed. 


// <Overview of the unit, what does it do, where does it fit into Olympia
// proper, use the section below to discuss the context>

=== How are the Vector uops generated?



[[Overview_Block_Diagram]]
=== Overview Block Diagram

// <Add an overview block diagram>

[[Functional_Description]]
== Functional Description

// <this begins the detailed description of the unit. Typically, this
// discusses each major block in a separate sub-section>

[[Unit_Block_Diagram]]
=== Unit Block Diagram

// <Add an overview block diagram>
// image:media/image1.png[image,width=576,height=366]
// Figure 1 - Sample Figure


[[Block_Diagram_Description]]
=== Block Diagram Description

// <walk through the block diagram>

// [[Description_of_Block_B1]]
// == Description of Block <B1>

// <this section contains block level details>

[[Operation]]
=== Operation

// <describe the low-level operation of the block>

[[Interfaces]]
=== Interfaces

// <this is typically a general list of block interfaces, this changes with
// development, final design will finalize this section>

[width="100%",cols="18%,21%,61%",options="header",]
|===
|*Name* |*C++ Type* |*Purpose/Description*
| | |
| | |
| | |
|===

[[CPP_Class_Description]]
=== C++ Class Description

// <describe the class, it’s inheritance assumptions and data structures
// used by the class

[[Parameterization]]
=== Parameterization

// <top level parameterization, include hidden and those visible in arch
// yaml>

[[Test_Bench_Description]]
== Test Bench Description

// <description of what is covered by the test bench, description of each
// test as appropriate

[[Description_of_Test_1]]
=== Description of Test 1

// <discuss test 1>

[[Description_of_Test_2]]
=== Description of Test 2

// <discuss test 2>

[[Future_Work_or_Features]]
== Future Work or Features

// <forward looking statements>

[[References_Citations]]
== References/Citations

// <Add references as needed>
// [1] <insert citation>

[[Appendices]]
== Appendices

// <as needed>

[[Appendix_1]]
=== Appendix 1

// <as needed>
